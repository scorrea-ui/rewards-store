(this["webpackJsonpstore-correa-santiago"]=this["webpackJsonpstore-correa-santiago"]||[]).push([[0],{127:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(4),o=r.n(c),s=(r(88),r(22)),l=(r(89),r(90),r(5)),i=r(17),u=r(15),m=r.n(u),d=r(29),E={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk","Access-Control-Allow-Origin":"*"},p={url:"https://coding-challenge-api.aerolab.co/user/me",method:"GET"},g={url:"https://coding-challenge-api.aerolab.co/user/history",method:"GET"},_={url:"https://coding-challenge-api.aerolab.co/user/points",method:"POST"},h=function(e){return fetch(_.url,{method:_.method,headers:E,body:JSON.stringify({amount:e})})},f={url:"https://coding-challenge-api.aerolab.co/user/history",method:"GET"},v={url:"https://coding-challenge-api.aerolab.co/redeem",method:"POST"},b=function(e){return fetch(v.url,{method:v.method,headers:E,body:JSON.stringify({productId:e})})},O=Object(i.b)((function(e){return{user:e.users,points:e.points}}),(function(e){return{getUser:function(){return e(function(){var e=Object(d.a)(m.a.mark((function e(t){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_USER_PENDING"}),e.next=3,fetch(p.url,{method:p.method,headers:E});case 3:return r=e.sent,e.next=6,r.json();case 6:a=e.sent;try{t({type:"GET_USER_SUCCESS",payload:a,loading:!1})}catch(n){t({type:"GET_USER_FAILED",error:n,loading:!1})}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.getUser,r=e.user,c=e.points;Object(a.useEffect)((function(){t()}),[t,c.message]);var o=r.loading;return n.a.createElement("header",{className:"c-header"},n.a.createElement(s.b,{style:{display:"inline-flex"},to:"/"},n.a.createElement("img",{src:"/rewards-store/aerolab-logo.svg",alt:"Aerolab Logo"})),o?n.a.createElement("span",{className:"c-header__info"},"Loading..."):n.a.createElement("div",{className:"c-header__info"},n.a.createElement("p",{className:"c-header__user"},n.a.createElement(s.b,{to:"/redeem?products=16"},r.user.name)),n.a.createElement(s.b,{to:"/points"},n.a.createElement("div",{className:"c-header__points"},n.a.createElement("span",null,r.user.points),n.a.createElement("img",{src:"/rewards-store/icons/coin.svg",alt:"Coins"})))))})),N=function(e){var t=e.title;return n.a.createElement("div",{className:"c-hero"},n.a.createElement("div",{className:"o-container"},n.a.createElement("div",{className:"o-grid"},n.a.createElement("h1",{className:"c-hero__title"},t))))},y=Object(l.f)((function(e){var t=e.productsLength,r=e.location,a=function(){var e=r.search,t=new URLSearchParams(e);return t.get("products")?t.get("products"):null};return n.a.createElement("span",null,a()?a():16," / ",t)})),S=Object(l.f)((function(e){var t=e.products,r=e.history;return Object(a.useEffect)((function(){r.push("?".concat(function(){var e=new URLSearchParams;return e.set("products",t.getItems()),e.toString()}()))}),[r,t]),n.a.createElement("div",{className:"c-pagination"},n.a.createElement("button",{className:"c-pagination__button c-pagination__button--prev",onClick:function(){return t.prev()}},n.a.createElement("img",{src:"/rewards-store/icons/arrow-left.svg",alt:"Previous Page"})),n.a.createElement("button",{className:"c-pagination__button c-pagination__button--next",onClick:function(){return t.next()}},n.a.createElement("img",{src:"/rewards-store/icons/arrow-right.svg",alt:"Next Page"})))})),j=function(e){var t=e.sortProducts,r=e.products,a=e.title,c=e.sorter;return n.a.createElement("button",{className:"c-btn c-btn--sorters",onClick:function(){return t(r,c)}},a)},P=function(e){var t=e.products,r=e.allProducts,a=e.sortProducts;return n.a.createElement("div",{className:"o-container"},n.a.createElement("div",{className:"o-grid o-grid--middle o-grid--between"},n.a.createElement("div",{className:"o-grid__col u-10/12@md"},n.a.createElement("div",{className:"c-product__sorter"},n.a.createElement(y,{productsLength:r.length}),n.a.createElement("span",{className:"c-product__sortby"},"Sort By:"),n.a.createElement(j,{sortProducts:a,products:r,title:"Category",sorter:"category"}),n.a.createElement(j,{sortProducts:a,products:r,title:"Lowest Price",sorter:"lowestprice"}),n.a.createElement(j,{sortProducts:a,products:r,title:"Highest Price",sorter:"highestprice"}))),n.a.createElement("div",{className:"o-grid__col u-2/12@md"},n.a.createElement(S,{products:t}))))},T=function(e){var t=e.category,r=e.cost,a=e.img,c=e.name,o=e.redeemPoints,s=e.points;return n.a.createElement("div",{className:"o-grid__col u-3/12@md"},n.a.createElement("div",{className:"c-product__box"},n.a.createElement("img",{className:"c-product__img",src:a?"/rewards-store/product-pics/MacbookPro-x1.png":a,alt:c}),n.a.createElement("hr",null),n.a.createElement("div",{className:"c-product__content"},n.a.createElement("p",{className:"c-product__category"},t),n.a.createElement("p",{className:"c-product__name"},c)),s>r?n.a.createElement("div",{className:"c-product__reveal"},n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"c-product__coins"},n.a.createElement("span",null,r),n.a.createElement("img",{src:"/rewards-store/icons/coin.svg",alt:"Coins"})),n.a.createElement("button",{className:"c-product__button",onClick:o},"Redeem now"))):null,s>r?n.a.createElement("div",{className:"c-product__buy c-product__buy--success"}):n.a.createElement("div",{className:"c-product__buy c-product__buy--error"},n.a.createElement("span",null,"Missing ",r-s),n.a.createElement("img",{src:"/rewards-store/icons/coin.svg",alt:"Coins"}))))},I=r(80),D=function(e,t){var r=Object(a.useState)(1),n=Object(I.a)(r,2),c=n[0],o=n[1],s=Math.ceil(e.length/t);return{next:function(){o((function(e){return Math.min(e+1,s)}))},prev:function(){o((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);o((function(){return Math.min(t,s)}))},currentData:function(){var r=(c-1)*t,a=r+t;return e.slice(r,a)},currentPage:c,maxPage:s,getItems:function(){return c*t>e.length?c*t-1:c*t}}},C=function(e){var t=e.allProducts;return n.a.createElement("div",{className:"o-container"},n.a.createElement("div",{className:"o-grid"},n.a.createElement("div",{className:"o-grid__col u-12/12"},n.a.createElement("div",{className:"c-product__sorter"},n.a.createElement(y,{productsLength:t.length})))))},w=r(129),G=Object(i.b)((function(e){return{products:e.products,user:e.users,points:e.points}}),(function(e){return{getAllProducts:function(){return e(function(){var e=Object(d.a)(m.a.mark((function e(t){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_PRODUCTS_PENDING"}),e.next=3,fetch(f.url,{method:f.method,headers:E});case 3:return r=e.sent,e.next=6,r.json();case 6:a=e.sent;try{t({type:"GET_PRODUCTS_SUCCESS",payload:a,loading:!1})}catch(n){t({type:"GET_PRODUCTS_FAILED",error:n,loading:!1})}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getPoints:function(t){return e(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(r){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:"REDEEM_POINTS_PENDING"}),t.next=3,b(e);case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent;try{r({type:"REDEEM_POINTS_SUCCESS",message:n,loading:!1})}catch(c){r({type:"REDEEM_POINTS_FAILED ",error:c,message:n,loading:!1})}case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},sortProducts:function(t,r){return e(function(e,t){return function(r){var a=e;console.log(a),""!==t&&a.sort((function(e,r){return"lowestprice"===t?e.cost>r.cost?1:-1:"highestprice"===t?e.cost<r.cost?1:-1:"category"===t?e.category>r.category?1:-1:a})),r({type:"ORDER_PRODUCTS",payload:a,sort:t})}}(t,r))}}}))((function(e){var t=e.getAllProducts,r=e.products,c=e.getPoints,o=e.user,s=e.points,l=e.sortProducts;Object(a.useEffect)((function(){t(),s.message.error?w.a.error({content:s.message.error}):s.message.message&&(w.a.success({content:s.message.message}),""!==s.message&&(s.message=""))}),[t,s.message]);var i=D(r.products,16),u=i.currentData();return n.a.createElement("div",{className:"c-products"},n.a.createElement(P,{products:i,allProducts:r.products,sortProducts:l}),n.a.createElement("div",{className:"o-container"},n.a.createElement("div",{className:"o-grid o-grid--center"},u.map((function(e,t){var r=e.productId,a=e.category,s=e.cost,l=e.img,i=e.name,u=o.user.points;return n.a.createElement(T,{key:i+t,_id:r,category:a,cost:s,img:l.hdUrl,name:i,redeemPoints:function(){return c(r)},points:u,product:e})}))),n.a.createElement(C,{allProducts:r.products})))})),R=function(){return n.a.createElement("div",null,n.a.createElement(O,null),n.a.createElement(N,{title:"Electronics"}),n.a.createElement(G,null))},U=function(e){var t=e.category,r=(e.cost,e.img),a=e.name;e.redeemPoints,e.points;return n.a.createElement("div",{className:"o-grid__col u-3/12@md"},n.a.createElement("div",{className:"c-product__box"},n.a.createElement("img",{className:"c-product__img",src:r?"/rewards-store/product-pics/MacbookPro-x1.png":r,alt:a}),n.a.createElement("hr",null),n.a.createElement("div",{className:"c-product__content"},n.a.createElement("p",{className:"c-product__category"},t),n.a.createElement("p",{className:"c-product__name"},a))))},x=Object(i.b)((function(e){return{history:e.history}}),(function(e){return{getHistory:function(){return e(function(){var e=Object(d.a)(m.a.mark((function e(t){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_HISTORY_PENDING"}),e.next=3,fetch(g.url,{method:g.method,headers:E});case 3:return r=e.sent,e.next=6,r.json();case 6:a=e.sent;try{t({type:"GET_HISTORY_SUCCESS",payload:a,loading:!1})}catch(n){t({type:"GET_HISTORY_FAILED",error:n,loading:!1})}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.getHistory,r=e.history;Object(a.useEffect)((function(){t()}),[t]);var c=D(r.history,16),o=c.currentData();return n.a.createElement("div",{className:"c-products"},n.a.createElement(P,{products:c,allProducts:r.history}),n.a.createElement("div",{className:"o-container"},n.a.createElement("div",{className:"o-grid"},o.map((function(e,t){var r=e.category,a=e.cost,c=e.img,o=e.name;return n.a.createElement(U,{key:o+t,category:r,cost:a,img:c.hdUrl,name:o})})))))})),A=function(){return n.a.createElement("div",null,n.a.createElement(O,null),n.a.createElement(N,{title:"Redeemed"}),n.a.createElement(x,null))},k=function(e){var t=e.handler,r=e.amount,a=e.className;return n.a.createElement("button",{className:"c-btn ".concat(a),onClick:function(){return t(parseInt(r))}},r)},L=Object(i.b)((function(e){return{points:e.points}}),(function(e){return{addPoints:function(t){return e(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(r){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:"ADD_POINTS_PENDING"}),t.next=3,h(e);case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent;try{r({type:"ADD_POINTS_SUCCESS",message:n,loading:!1})}catch(c){r({type:"ADD_POINTS_FAILED",error:c,message:n,loading:!1})}case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.addPoints;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"o-container"},n.a.createElement("div",{className:"o-grid o-grid--center o-grid--middle"},n.a.createElement("div",{className:"o-grid__col u-4/12@md"},n.a.createElement(k,{className:"c-btn--primary",handler:t,amount:"1000"})),n.a.createElement("div",{className:"o-grid__col u-4/12@md"},n.a.createElement(k,{className:"c-btn--secondary",handler:t,amount:"5000"})),n.a.createElement("div",{className:"o-grid__col u-4/12@md"},n.a.createElement(k,{className:"c-btn--tertiary",handler:t,amount:"7500"})))))})),M=function(){return n.a.createElement("div",null,n.a.createElement(O,null),n.a.createElement(N,{title:"Get Points"}),n.a.createElement(L,null))},F=function(){return n.a.createElement("div",null,n.a.createElement(l.c,null,n.a.createElement(l.a,{exact:!0,path:"/"},n.a.createElement(R,null)),n.a.createElement(l.a,{path:"/redeem"},n.a.createElement(A,null)),n.a.createElement(l.a,{path:"/points"},n.a.createElement(M,null))))};var H=function(){return n.a.createElement(s.a,null,n.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=r(21),Y=r(77),B=r(78),W=r(79),Q=r(2),z={user:"",loading:!1,error:null,history:null},X={products:[],loading:!1,error:null,points:null,message:"",sort:""},Z={loading:!1,error:null,message:""},K={loading:!1,error:null,history:[]},V=Object(J.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_PENDING":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0});case"GET_USER_SUCCESS":return Object(Q.a)(Object(Q.a)({},e),{},{user:t.payload,loading:!1});case"GET_USER_FAILED":return Object(Q.a)(Object(Q.a)({},e),{},{error:t.error,loading:!1});case"GET_HISTORY_PENDING":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0});case"GET_HISTORY_SUCCESS":return Object(Q.a)(Object(Q.a)({},e),{},{history:t.payload,loading:!1});case"GET_HISTORY_FAILED":return Object(Q.a)(Object(Q.a)({},e),{},{error:t.error,loading:!1});default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PRODUCTS_PENDING":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0});case"GET_PRODUCTS_SUCCESS":return Object(Q.a)(Object(Q.a)({},e),{},{products:t.payload,loading:!1});case"GET_PRODUCTS_FAILED":return Object(Q.a)(Object(Q.a)({},e),{},{error:t.error,loading:!1});case"ORDER_PRODUCTS":return Object(Q.a)(Object(Q.a)({},e),{},{products:t.payload,sort:t.payload.sort});default:return e}},points:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REDEEM_POINTS_PENDING":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0});case"REDEEM_POINTS_SUCCESS":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,message:t.message});case"REDEEM_POINTS_FAILED ":return Object(Q.a)(Object(Q.a)({},e),{},{error:t.error,loading:!1,message:t.message});case"ADD_POINTS_PENDING":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0});case"ADD_POINTS_SUCCESS":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,message:t.message});case"ADD_POINTS_FAILED":return Object(Q.a)(Object(Q.a)({},e),{},{error:t.error,loading:!1,message:t.message});default:return e}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_HISTORY_PENDING":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0});case"GET_HISTORY_SUCCESS":return Object(Q.a)(Object(Q.a)({},e),{},{history:t.payload,loading:!1});case"GET_HISTORY_FAILED":return Object(Q.a)(Object(Q.a)({},e),{},{error:t.error,loading:!1});default:return e}}}),$=Object(J.createStore)(V,Object(Y.composeWithDevTools)(Object(J.applyMiddleware)(B.a,W.a)));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(i.a,{store:$},n.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},83:function(e,t,r){e.exports=r(127)},88:function(e,t,r){},89:function(e,t,r){}},[[83,1,2]]]);
//# sourceMappingURL=main.1780db5f.chunk.js.map